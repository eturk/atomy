<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Testing with Therie</title><link type="text/css" rel="stylesheet" href="public/anatomy.css" /><link type="text/css" rel="stylesheet" href="public/highlight.css" /><script type="text/javascript" src="public/jquery.js"></script><script type="text/javascript" src="public/jquery.hotkeys.js"></script><script type="text/javascript" src="public/tags_therie.js"></script><script type="text/javascript" src="public/main.js"></script></head><body><div id="main"><div id="content"><div class="section" id="section_therie"><h1 class="section_header"><a name="therie"></a>Testing with Therie</h1><p></p><p>Therie is a small and simple behavioral-style testing suite that comes with
Atomy.</p><div class="interaction"><pre><span class="caret">&gt; </span><span class="n">use</span><span class="p">(</span><span class="s">&quot;</span><span class="s">therie</span><span class="s">&quot;</span><span class="p">)</span>
<span class="o">#&lt;</span><span class="no"><a href="index.html">Atomy</a></span><span class="p">:</span><span class="p">:</span><span class="no">Module</span><span class="t"> </span><span class="ss">'therie</span><span class="ss">.ay</span><span class="ss">'</span><span class="o">&gt;</span>
</pre></div><p>
</p><div class="definition data"><p><a name="Stats"></a></p><div class="thumb"><pre><span class="no"><a href="therie.html#Stats">Stats</a></span><span class="p">(</span><span class="vi">@passed</span><span class="t"> </span><span class="o">=</span><span class="t"> </span><span class="mi">0</span><span class="p">,</span><span class="t"> </span><span class="vi">@failed</span><span class="t"> </span><span class="o">=</span><span class="t"> </span><span class="mi">0</span><span class="p">)</span></pre></div><p>The current passed/failed count of the current tests run.</p></div><div class="section" id="section_structure"><h2 class="section_header"><a name="structure"></a>Structure</h2><div class="definition"><p><a name="theorize"></a></p><div class="thumb"><pre><span class="n"><a href="therie.html#theorize">theorize</a></span><span class="t"> </span><span class="o">&amp;</span><span class="n">tests</span><span class="definition_result_arrow"> =&gt; </span><span class="no"><a href="therie.html#Stats">Stats</a></span></pre></div><p>Run <code><span class="n"><a href="therie.html#tests">tests</a></span></code> and keep track of how many passed and how many failed,
printing the stats at the end and returning them.</p><div class="example"><p><p><em>Example:</em></p></p><div class="interaction"><pre><span class="caret">&gt; </span><span class="n"><a href="therie.html#theorize">theorize</a></span><span class="p">:</span><span class="t"> </span><span class="n"><a href="therie.html#describe">describe</a></span><span class="p">(</span><span class="s">&quot;</span><span class="s">foo</span><span class="s">&quot;</span><span class="p">)</span><span class="p">:</span><span class="t"> </span><span class="n"><a href="therie.html#it">it</a></span><span class="p">(</span><span class="s">&quot;</span><span class="s">does x</span><span class="s">&quot;</span><span class="p">)</span><span class="p">:</span><span class="t"> </span><span class="kc">true</span><span class="t"> </span><span class="n"><a href="therie.html#should-be">should-be</a></span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
- foo
  ✓ does x

total of 1 tests (1 passed, 0 failed)
<span class="o">#&lt;</span><span class="n"><a href="therie.html">therie</a></span><span class="ss">.ay</span><span class="p">:</span><span class="p">:</span><span class="no"><a href="therie.html#Stats">Stats</a></span><span class="p">:</span><span class="mh">0x5c680</span><span class="o">&gt;</span>
<span class="caret">&gt; </span><span class="n"><a href="therie.html#theorize">theorize</a></span><span class="p">:</span><span class="t"> </span><span class="n"><a href="therie.html#describe">describe</a></span><span class="p">(</span><span class="s">&quot;</span><span class="s">foo</span><span class="s">&quot;</span><span class="p">)</span><span class="p">:</span><span class="t"> </span><span class="n"><a href="therie.html#it">it</a></span><span class="p">(</span><span class="s">&quot;</span><span class="s">does x</span><span class="s">&quot;</span><span class="p">)</span><span class="p">:</span><span class="t"> </span><span class="kc">true</span><span class="t"> </span><span class="n"><a href="therie.html#should-be">should-be</a></span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>
- foo
  ✗ does x
    ` RuntimeError: expected false, got true
      /Users/Alex/.rbenv/versions/rbX-1.9/gemsets/atomy/gems/atomy-0.3/kernel/dynamic.ay:48:in `send_message'
      /Users/Alex/.rbenv/versions/rbX-1.9/gemsets/atomy/gems/atomy-0.3/kernel/therie.ay:92:in `'
      wrapper+22:in `should_be'
      therie:1:in `__module_init__'
      /Users/Alex/.rbenv/versions/rbX-1.9/gemsets/atomy/gems/atomy-0.3/kernel/therie.ay:59:in `'

total of 1 tests (0 passed, 1 failed)
<span class="o">#&lt;</span><span class="n"><a href="therie.html">therie</a></span><span class="ss">.ay</span><span class="p">:</span><span class="p">:</span><span class="no"><a href="therie.html#Stats">Stats</a></span><span class="p">:</span><span class="mh">0x5cc0c</span><span class="o">&gt;</span>
</pre></div></div></div><div class="definition"><p><a name="describe"></a></p><div class="thumb"><pre><span class="n"><a href="therie.html#describe">describe</a></span><span class="p">(</span><span class="n">what</span><span class="p">)</span><span class="t"> </span><span class="o">&amp;</span><span class="n">body</span><span class="definition_result_arrow"> =&gt; </span><span class="kc">nil</span></pre></div><p>Logically group together a set of behavior.</p><p>Prints out <code><span class="n">what</span></code>, with each test in <code><span class="n">body</span></code> indented afterward.</p><div class="example"><p><p><em>Example:</em></p></p><div class="interaction"><pre><span class="caret">&gt; </span><span class="n"><a href="therie.html#describe">describe</a></span><span class="p">(</span><span class="s">&quot;</span><span class="s">foo</span><span class="s">&quot;</span><span class="p">)</span><span class="p">:</span><span class="t"> </span><span class="n"><a href="therie.html#it">it</a></span><span class="p">(</span><span class="s">&quot;</span><span class="s">does x</span><span class="s">&quot;</span><span class="p">)</span><span class="p">:</span><span class="t"> </span><span class="kc">true</span><span class="t"> </span><span class="n"><a href="therie.html#should-be">should-be</a></span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>
- foo
  ✗ does x
    ` RuntimeError: expected false, got true
      /Users/Alex/.rbenv/versions/rbX-1.9/gemsets/atomy/gems/atomy-0.3/kernel/dynamic.ay:48:in `send_message'
      /Users/Alex/.rbenv/versions/rbX-1.9/gemsets/atomy/gems/atomy-0.3/kernel/therie.ay:92:in `'
      wrapper+22:in `should_be'
      therie:1:in `__module_init__'
      /Users/Alex/.rbenv/versions/rbX-1.9/gemsets/atomy/gems/atomy-0.3/kernel/therie.ay:59:in `'
<span class="kc">nil</span>
<span class="caret">&gt; </span><span class="n"><a href="therie.html#describe">describe</a></span><span class="p">(</span><span class="s">&quot;</span><span class="s">foo</span><span class="s">&quot;</span><span class="p">)</span><span class="p">:</span><span class="t"> </span><span class="n"><a href="therie.html#it">it</a></span><span class="p">(</span><span class="s">&quot;</span><span class="s">does x</span><span class="s">&quot;</span><span class="p">)</span><span class="p">:</span><span class="t"> </span><span class="kc">true</span><span class="t"> </span><span class="n"><a href="therie.html#should-be">should-be</a></span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
- foo
  ✓ does x
<span class="kc">nil</span>
</pre></div></div></div><div class="definition"><p><a name="it"></a></p><div class="thumb"><pre><span class="n"><a href="therie.html#it">it</a></span><span class="p">(</span><span class="n">description</span><span class="p">)</span><span class="t"> </span><span class="o">&amp;</span><span class="n">tests</span><span class="definition_result_arrow"> =&gt; </span><span class="kc">nil</span></pre></div><p>Describe some behavior that <code><span class="n">body</span></code> will demonstrate.</p><div class="example"><p><p><em>Example:</em></p></p><div class="interaction"><pre><span class="caret">&gt; </span><span class="n"><a href="therie.html#it">it</a></span><span class="p">(</span><span class="s">&quot;</span><span class="s">adds correctly</span><span class="s">&quot;</span><span class="p">)</span><span class="p">:</span><span class="t"> </span><span class="p">(</span><span class="mi">2</span><span class="t"> </span><span class="o">+</span><span class="t"> </span><span class="mi">2</span><span class="p">)</span><span class="t"> </span><span class="n"><a href="therie.html#should-be">should-be</a></span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
✓ adds correctly
<span class="kc">nil</span>
<span class="caret">&gt; </span><span class="n"><a href="therie.html#it">it</a></span><span class="p">(</span><span class="s">&quot;</span><span class="s">adds correctly</span><span class="s">&quot;</span><span class="p">)</span><span class="p">:</span><span class="t"> </span><span class="p">(</span><span class="mi">1</span><span class="t"> </span><span class="o">+</span><span class="t"> </span><span class="mi">2</span><span class="p">)</span><span class="t"> </span><span class="n"><a href="therie.html#should-be">should-be</a></span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
✗ adds correctly
  ` RuntimeError: expected 4, got 3
    /Users/Alex/.rbenv/versions/rbX-1.9/gemsets/atomy/gems/atomy-0.3/kernel/dynamic.ay:48:in `send_message'
    /Users/Alex/.rbenv/versions/rbX-1.9/gemsets/atomy/gems/atomy-0.3/kernel/therie.ay:92:in `'
    wrapper+22:in `should_be'
    therie:1:in `__module_init__'
    /Users/Alex/.rbenv/versions/rbX-1.9/gemsets/atomy/gems/atomy-0.3/kernel/therie.ay:59:in `'
<span class="kc">nil</span>
</pre></div></div></div></div><div class="section" id="section_tests"><h2 class="section_header"><a name="tests"></a>Tests</h2><div class="definition macro"><p><a name="should"></a></p><div class="thumb"><pre><span class="si">~x</span><span class="t"> </span><span class="n"><a href="therie.html#should">should</a></span><span class="p">:</span><span class="t"> </span><span class="si">~</span><span class="o">*</span><span class="n">check</span></pre></div><p>Test that <code><span class="n">check</span></code> is satisified by <code><span class="n">x</span></code> by evaluating it with
<code><span class="n">x</span></code> as <code><span class="bp">self</span></code>.</p><div class="example"><p><p><em>Example:</em></p></p><div class="interaction"><pre><span class="caret">&gt; </span><span class="p">(</span><span class="mi">2</span><span class="t"> </span><span class="o">+</span><span class="t"> </span><span class="mi">2</span><span class="p">)</span><span class="t"> </span><span class="n"><a href="therie.html#should">should</a></span><span class="p">:</span><span class="t"> </span><span class="n">even</span><span class="o">?</span>
<span class="kc">nil</span>
<span class="caret">&gt; </span><span class="p">(</span><span class="mi">2</span><span class="t"> </span><span class="o">+</span><span class="t"> </span><span class="mi">2</span><span class="p">)</span><span class="t"> </span><span class="n"><a href="therie.html#should">should</a></span><span class="p">:</span><span class="t"> </span><span class="n">odd</span><span class="o">?</span>
<span class="gr">RuntimeError: assertion failed for 2 + 2</span>
</pre></div></div></div><div class="definition"><p><a name="should-be"></a></p><div class="thumb"><pre><span class="n">x</span><span class="t"> </span><span class="n"><a href="therie.html#should-be">should-be</a></span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="definition_result_arrow"> =&gt; </span><span class="kc">nil</span></pre></div><p>Test for <code><span class="n">x</span><span class="t"> </span><span class="o">==</span><span class="t"> </span><span class="n">y</span></code>.</p><div class="example"><p><p><em>Example:</em></p></p><div class="interaction"><pre><span class="caret">&gt; </span><span class="p">(</span><span class="mi">2</span><span class="t"> </span><span class="o">+</span><span class="t"> </span><span class="mi">2</span><span class="p">)</span><span class="t"> </span><span class="n"><a href="therie.html#should-be">should-be</a></span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="kc">nil</span>
<span class="caret">&gt; </span><span class="p">(</span><span class="mi">1</span><span class="t"> </span><span class="o">+</span><span class="t"> </span><span class="mi">2</span><span class="p">)</span><span class="t"> </span><span class="n"><a href="therie.html#should-be">should-be</a></span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="gr">RuntimeError: expected 4, got 3</span>
</pre></div></div></div><div class="definition"><p><a name="should-raise"></a></p><div class="thumb"><pre><span class="n">x</span><span class="t"> </span><span class="n"><a href="therie.html#should-raise">should-raise</a></span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="definition_result_arrow"> =&gt; </span><span class="kc">nil</span>
  | <span class="n">x</span><span class="t"> </span><span class="n">respond-to</span><span class="p">(</span><span class="ss">.call</span><span class="p">)</span><span class="o">?</span>
  | <span class="n">y</span><span class="t"> </span><span class="n">is-a</span><span class="p">(</span><span class="no">Class</span><span class="p">)</span><span class="o">?</span></pre></div><p>Test that executing <code><span class="n">x</span></code> will raise an exception of class <code><span class="n">y</span></code>.</p><div class="example"><p><p><em>Example:</em></p></p><div class="interaction"><pre><span class="caret">&gt; </span><span class="p">{</span><span class="t"> </span><span class="n">abc</span><span class="t"> </span><span class="p">}</span><span class="t"> </span><span class="n"><a href="therie.html#should-raise">should-raise</a></span><span class="p">(</span><span class="no">NoMethodError</span><span class="p">)</span>
<span class="kc">nil</span>
<span class="caret">&gt; </span><span class="p">{</span><span class="t"> </span><span class="ss">.ok</span><span class="t"> </span><span class="p">}</span><span class="t"> </span><span class="n"><a href="therie.html#should-raise">should-raise</a></span><span class="p">(</span><span class="no">NoMethodError</span><span class="p">)</span>
<span class="gr">RuntimeError: #should-raise - no exception raised</span>
</pre></div></div></div><div class="definition"><p><a name="should-error"></a></p><div class="thumb"><pre><span class="n">x</span><span class="t"> </span><span class="n"><a href="therie.html#should-error">should-error</a></span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="definition_result_arrow"> =&gt; </span><span class="kc">nil</span>
  | <span class="n">x</span><span class="t"> </span><span class="n">respond-to</span><span class="p">(</span><span class="ss">.call</span><span class="p">)</span><span class="o">?</span>
  | <span class="n">y</span><span class="t"> </span><span class="n">is-a</span><span class="p">(</span><span class="no">Class</span><span class="p">)</span><span class="o">?</span></pre></div><p>Test that executing <code><span class="n">x</span></code> will signal an error of class <code><span class="n">y</span></code>.</p><div class="example"><p><p><em>Example:</em></p></p><div class="interaction"><pre><span class="caret">&gt; </span><span class="p">{</span><span class="t"> </span><span class="n"><a href="condition-system.html#error">error</a></span><span class="p">(</span><span class="ss">.foo</span><span class="p">)</span><span class="t"> </span><span class="p">}</span><span class="t"> </span><span class="n"><a href="therie.html#should-error">should-error</a></span><span class="p">(</span><span class="no"><a href="condition-system.html#SimpleError">SimpleError</a></span><span class="p">)</span>
<span class="kc">nil</span>
<span class="caret">&gt; </span><span class="p">{</span><span class="t"> </span><span class="ss">.ok</span><span class="t"> </span><span class="p">}</span><span class="t"> </span><span class="n"><a href="therie.html#should-error">should-error</a></span><span class="p">(</span><span class="no"><a href="condition-system.html#SimpleError">SimpleError</a></span><span class="p">)</span>
<span class="gr">RuntimeError: #should-error - no error signaled</span>
</pre></div></div></div></div></div></div></div><div class="search"><form action="javascript:void(0)"><input type="text" placeholder="Search&hellip;" autocomplete="off" id="search" /></form><ul class="search_results"></ul></div><div id="sidebar"><h4>On this page:</h4><ol class="toc"><li><a href="therie.html#structure">Structure</a></li><li><a href="therie.html#tests">Tests</a></li></ol><h4>Up one level:</h4><ol class="toc"><li><a href="reference.html">Reference</a><ol><li><a href="concurrency.html">Concurrency</a><ol><li><a href="concurrency.html#sending-and-receiving">Sending &amp; Receiving</a></li><li><a href="concurrency.html#spawning">Spawning</a></li></ol></li><li><a href="condition-system.html">Condition System</a><ol><li><a href="condition-system.html#conditions">Conditions</a></li><li><a href="condition-system.html#handling">Handling</a></li><li><a href="condition-system.html#signalling">Signalling</a></li><li><a href="condition-system.html#debuggers">Debuggers</a></li></ol></li><li><a href="core.html">Core</a></li><li><a href="input-and-output.html">Input &amp; Output</a><ol><li><a href="input-and-output.html#output">Output</a></li><li><a href="input-and-output.html#input">Input</a></li></ol></li><li><a href="the-repl.html">The REPL</a></li><li><a href="therie.html">Testing with Therie</a><ol><li><a href="therie.html#structure">Structure</a></li><li><a href="therie.html#tests">Tests</a></li></ol></li></ol></li></ol></div></body></html>