<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>The REPL</title><link type="text/css" rel="stylesheet" href="public/anatomy.css" /><link type="text/css" rel="stylesheet" href="public/highlight.css" /><script type="text/javascript" src="public/jquery.js"></script><script type="text/javascript" src="public/jquery.hotkeys.js"></script><script type="text/javascript" src="public/tags_the-repl.js"></script><script type="text/javascript" src="public/main.js"></script></head><body><div id="main"><div id="content"><div class="section" id="section_the-repl"><h1 class="section_header"><a name="the-repl"></a>The REPL</h1><p></p><div class="interaction"><pre><span class="caret">&gt; </span><span class="n">require</span><span class="p">(</span><span class="s">&quot;</span><span class="s">repl</span><span class="s">&quot;</span><span class="p">)</span>
<span class="o">#&lt;</span><span class="no"><a href="index.html">Atomy</a></span><span class="p">:</span><span class="p">:</span><span class="no">Module</span><span class="t"> </span><span class="ss">'repl</span><span class="ss">.ay</span><span class="ss">'</span><span class="o">&gt;</span>
</pre></div><div class="definition"><p><a name="basic-repl"></a></p><div class="thumb"><pre><span class="n"><a href="the-repl.html#basic-repl">basic-repl</a></span><span class="p">(</span><span class="n">bnd</span><span class="t"> </span><span class="o">=</span><span class="t"> </span><span class="no">TOPLEVEL_BINDING</span><span class="p">)</span><span class="definition_result_arrow"> =&gt; </span><span class="n">_</span>
  | <span class="n">bnd</span><span class="t"> </span><span class="n">is-a</span><span class="p">(</span><span class="no">Binding</span><span class="p">)</span><span class="o">?</span></pre></div><p>The basics of a REPL - reading, evaluating, and printing in a loop. More flexibility is provided by various signals. See <code><span class="n"><a href="the-repl.html#repl">repl</a></span></code> for a fancier REPL, which builds upon this, and <code><span class="no"><a href="the-repl.html#ReplDebugger">ReplDebugger</a></span></code>.</p><p>When showing the prompt, <code><span class="ss">.prompt</span></code> is signaled with a <code><span class="ss">.use-prompt</span></code> restart available. Invoke this restart and pass along a string to override the prompt, which defaults to <code>&gt;&gt;</code>.</p><p>Input preceded by a colon (<code>:</code>) and followed by an alphanumeric character is assumed to be a <em>special command</em>. These are not evaluated, and are signaled as <code><span class="ss">.special</span><span class="p">(</span><span class="n">text</span><span class="p">)</span></code>.</p><p>When the user sends <code>EOF</code> (Ctrl+D) or an interrupt (Ctrl+C), <code><span class="ss">.quit</span></code> is signaled.</p><p>When the user enters code, <code><span class="ss">.input</span><span class="p">(</span><span class="n">text</span><span class="p">)</span></code> is signaled. The code is evaluated with two restarts registered: <code>.retry</code> for re-attempting evaluation, and <code>.abort</code>, for canceling the evaluation. After the code is evaluated, <code><span class="ss">.evaluated</span><span class="p">(</span><span class="n">result</span><span class="p">)</span></code> is signaled.</p><p><code><span class="ss">.loop</span></code> is signaled before the loop starts over again (i.e., after the input is handled).</p></div><div class="definition data"><p><a name="ReplDebugger"></a></p><div class="thumb"><pre><span class="no"><a href="the-repl.html#ReplDebugger">ReplDebugger</a></span></pre></div><p>An interactive debugger REPL for handling errors. This will list the results along with a number, allow the user to continue evaluating code, and once they enter a <em>special command</em> in the form of <code>:<em>number</em></code>, the specified restart will be invoked.</p></div><div class="definition"><p><a name="repl"></a></p><div class="thumb"><pre><span class="n"><a href="the-repl.html#repl">repl</a></span><span class="p">(</span><span class="n">history</span><span class="t"> </span><span class="o">=</span><span class="t"> </span><span class="kc">nil</span><span class="p">,</span><span class="t"> </span><span class="n">bnd</span><span class="t"> </span><span class="o">=</span><span class="t"> </span><span class="no">TOPLEVEL_BINDING</span><span class="p">)</span><span class="definition_result_arrow"> =&gt; </span><span class="n">_</span>
  | <span class="n">history</span><span class="t"> </span><span class="n">is-a</span><span class="p">(</span><span class="no">String</span><span class="p">)</span><span class="o">?</span>
  | <span class="n">bnd</span><span class="t"> </span><span class="n">is-a</span><span class="p">(</span><span class="no">Binding</span><span class="p">)</span><span class="o">?</span></pre></div><p>A more feature-filled REPL, providing persistent history and setting <code><span class="no"><a href="condition-system.html#Debugger">Debugger</a></span></code> to <code><span class="no"><a href="the-repl.html#ReplDebugger">ReplDebugger</a></span></code>.</p><p>History will be managed and appended to a file specified by <code><span class="n">history</span></code> upon termination.</p></div><p>
</p></div></div></div><div class="search"><form action="javascript:void(0)"><input type="text" placeholder="Search&hellip;" autocomplete="off" id="search" /></form><ul class="search_results"></ul></div><div id="sidebar"><h4>Up one level:</h4><ol class="toc"><li><a href="reference.html">Reference</a><ol><li><a href="concurrency.html">Concurrency</a><ol><li><a href="concurrency.html#sending-and-receiving">Sending &amp; Receiving</a></li><li><a href="concurrency.html#spawning">Spawning</a></li></ol></li><li><a href="condition-system.html">Condition System</a><ol><li><a href="condition-system.html#conditions">Conditions</a></li><li><a href="condition-system.html#handling">Handling</a></li><li><a href="condition-system.html#signalling">Signalling</a></li><li><a href="condition-system.html#debuggers">Debuggers</a></li></ol></li><li><a href="core.html">Core</a></li><li><a href="input-and-output.html">Input &amp; Output</a><ol><li><a href="input-and-output.html#output">Output</a></li><li><a href="input-and-output.html#input">Input</a></li></ol></li><li><a href="the-repl.html">The REPL</a></li><li><a href="therie.html">Testing with Therie</a><ol><li><a href="therie.html#structure">Structure</a></li><li><a href="therie.html#tests">Tests</a></li></ol></li></ol></li></ol></div></body></html>