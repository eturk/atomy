<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Syntax</title><link type="text/css" rel="stylesheet" href="public/anatomy.css" /><link type="text/css" rel="stylesheet" href="public/highlight.css" /><script type="text/javascript" src="public/jquery.js"></script><script type="text/javascript" src="public/jquery.hotkeys.js"></script><script type="text/javascript" src="public/tags_syntax.js"></script><script type="text/javascript" src="public/main.js"></script></head><body><div id="main"><div id="content"><div class="section" id="section_syntax"><h1 class="section_header"><a name="syntax"></a>Syntax</h1><p></p><p>
</p><div class="section" id="section_general-rules"><h2 class="section_header"><a name="general-rules"></a>General Rules</h2><p>Atomy is whitespace-sensitive. Operators must be surrounded by whitespace,
and indentation provides hints to the parser when you don't want to use
commas. For example, <code><span class="n">foo-bar</span></code> is an identifier, while <code><span class="n">foo</span><span class="t"> </span><span class="o">-</span><span class="t"> </span><span class="n">bar</span></code> is
subtraction.</p><p>Requiring whitespace around operators enables the use of more symbols in
identifier names, allowing pleasant conventions like question-marks (e.g.
<code><span class="n">empty</span><span class="o">?</span></code>) and exclamation points (e.g. <code><span class="n">do-something-destructive</span><span class="o">!</span></code>)
for indicating the behaviour of a method or variable.</p><p>Atomy's whitespace indentation rules are similar to Haskell's - they are
not as strict as Python's, you just increase the spacing amount to indicate
continuing the previous line, and continue that indentation amount to
indicate continuing the current &quot;block&quot; of code.</p><p>Using significant whitespace, this code:</p><div class="highlight"><pre><span class="p">{</span><span class="t"> </span><span class="s">&quot;</span><span class="s">hi</span><span class="s">&quot;</span><span class="t"> </span><span class="n"><a href="input-and-output.html#print">print</a></span><span class="t">
  </span><span class="n">goodbye</span><span class="t">
  </span><span class="mi">2</span><span class="t"> </span><span class="o">+</span><span class="t"> </span><span class="mi">2</span><span class="t">
</span><span class="p">}</span><span class="t"> </span><span class="n">call</span></pre></div><p>is equivalent to:</p><div class="highlight"><pre><span class="p">{</span><span class="t"> </span><span class="s">&quot;</span><span class="s">hi</span><span class="s">&quot;</span><span class="t"> </span><span class="n"><a href="input-and-output.html#print">print</a></span><span class="p">,</span><span class="t"> </span><span class="n">goodbye</span><span class="p">,</span><span class="t"> </span><span class="mi">2</span><span class="t"> </span><span class="o">+</span><span class="t"> </span><span class="mi">2</span><span class="t"> </span><span class="p">}</span><span class="t"> </span><span class="n">call</span></pre></div><p>With these simple line-continuing rules in place, you can spread a single
chain of messages across multiple lines:</p><div class="highlight"><pre><span class="n">something</span><span class="t">
  </span><span class="n">foo</span><span class="t">
  </span><span class="n">sqrt</span></pre></div><p>Which is parsed as:</p><div class="highlight"><pre><span class="n">something</span><span class="t"> </span><span class="n">foo</span><span class="t"> </span><span class="n">sqrt</span></pre></div><p>The same rules apply to operators, which will skip any whitespace to get to
the right-hand side of the expression.</p><div class="highlight"><pre><span class="n">foo</span><span class="t"> </span><span class="o">=</span><span class="t">
  </span><span class="mi">1</span><span class="t"> </span><span class="o">+</span><span class="t">
    </span><span class="mi">2</span><span class="t"> </span><span class="o">*</span><span class="t">
      </span><span class="mi">3</span></pre></div><p>Which is parsed as:</p><div class="highlight"><pre><span class="n">foo</span><span class="t"> </span><span class="o">=</span><span class="t"> </span><span class="mi">1</span><span class="t"> </span><span class="o">+</span><span class="t"> </span><span class="mi">2</span><span class="t"> </span><span class="o">*</span><span class="t"> </span><span class="mi">3</span></pre></div><p>Two spaces for indentation is recommended.</p></div><div class="section" id="section_comments"><h2 class="section_header"><a name="comments"></a>Comments</h2><p>Atomy borrows its comment syntax from Haskell: <code>--</code> for line comments,
and <code>{- -}</code> for block comments (which can be nested).</p><div class="highlight"><pre><span class="mi">1</span><span class="t"> </span><span class="c1">-- The number, &quot;one.&quot;</span><span class="t">
</span><span class="p">(</span><span class="cm">{-</span><span class="cm"> Blah blah blah, </span><span class="cm">{-</span><span class="cm"> yo dawg </span><span class="cm">-}</span><span class="cm">, fizz buzz! </span><span class="cm">-}</span><span class="t"> </span><span class="s">&quot;</span><span class="s">foo</span><span class="s">&quot;</span><span class="p">)</span><span class="t"> </span><span class="n"><a href="input-and-output.html#print">print</a></span></pre></div><p>Additionally, Atomy will ignore a shebang at the very start of a file.</p></div><div class="section" id="section_literals-syntax"><h2 class="section_header"><a name="literals-syntax"></a>Literals</h2><dl><dt>integers</dt><dd><p><code><span class="mi">1</span></code>, <code><span class="mi">-1</span></code>, <code><span class="mh">0xdeadbeef</span></code>, <code><span class="mo">0o644</span></code>, <code><span class="mh">-0x10</span></code>, <code><span class="mo">-0o10</span></code> ...</p></dd><dt>floats</dt><dd><p><code><span class="mf">1.0</span></code>, <code><span class="mf">-1.5</span></code>, <code><span class="mf">1.5e10</span></code>, <code><span class="mf">1.4e-3</span></code>, <code><span class="mf">-1.4e4</span></code>...</p></dd><dt>strings</dt><dd><p><code><span class="s">&quot;</span><span class="s">&quot;</span></code>, <code><span class="s">&quot;</span><span class="s">foo</span><span class="s">&quot;</span></code>, <code><span class="s">&quot;</span><span class="s">fizz </span><span class="se">\</span><span class="se">&quot;</span><span class="s">buzz</span><span class="se">\</span><span class="se">&quot;</span><span class="s">&quot;</span></code></p><p>Escape codes supported (in addition to numeric escapes):</p><pre>ascii-2:
  \b \t \n \v \f \r \SO \SI \EM \FS \GS \RS \US ‚ê£ (space)
  \BS \HT \LF \VT \FF \CR \SO \SI \EM \BS \GS \RS \US \SP

ascii-3:
  \NUL \SOH \STX \ETX \EOT \ENQ \ACK \a \DLE \DC1 \DC2
  \DC3 \DC4 \NAK \SYN \ETB \CAN \SUB \ESC \DEL</pre></dd><dt>lists</dt><dd><p><code><span class="p">[</span><span class="p">]</span></code>, <code><span class="p">[</span><span class="mi">1</span><span class="p">]</span></code>, <code><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="t"> </span><span class="ss">.two</span><span class="p">,</span><span class="t"> </span><span class="s">&quot;</span><span class="s">three</span><span class="s">&quot;</span><span class="p">]</span></code>, ...</p></dd><dt>expressions</dt><dd><dl><dt>quoted</dt><dd><p>An apostrophe (<code>'</code>) before an expression &quot;quotes&quot; it,
preventing evaluation and turning it into an expression literal:</p><div class="example"><p><p><em>Example:</em></p></p><div class="highlight"><pre><span class="ss">'</span><span class="mi">1</span><span class="t">
</span><span class="ss">'a</span><span class="t">
</span><span class="ss">'</span><span class="p">(</span><span class="mi">1</span><span class="t"> </span><span class="o">+</span><span class="t"> </span><span class="mi">1</span><span class="p">)</span><span class="t">
</span><span class="ss">'</span><span class="ss">'</span><span class="p">(</span><span class="mi">1</span><span class="t"> </span><span class="o">+</span><span class="t"> </span><span class="n">b</span><span class="p">)</span><span class="t">
</span><span class="ss">'</span><span class="p">{</span><span class="t"> </span><span class="n">a</span><span class="t"> </span><span class="o">=</span><span class="t"> </span><span class="mi">1</span><span class="p">,</span><span class="t"> </span><span class="n">a</span><span class="t"> </span><span class="o">+</span><span class="t"> </span><span class="mi">1</span><span class="t"> </span><span class="p">}</span></pre></div></div></dd><dt>quasiquoted</dt><dd><p>Atomy supports quasiquotation as seen in most Lisps, most similarly
Clojure. A backquote (<code>`</code>) begins a quasiquote, inside of
which you can use tilde (<code>~</code>) to &quot;unquote.&quot;</p><p>These can be nested infinitely; unquoting works inside of aggregate
expressions such as lists, blocks, and definitions.</p><div class="example"><p><p><em>Example:</em></p></p><div class="interaction"><pre><span class="caret">&gt; </span><span class="ss">`</span><span class="mi">1</span>
<span class="mi">1</span>
<span class="caret">&gt; </span><span class="ss">`</span><span class="p">(</span><span class="mi">1</span><span class="t"> </span><span class="o">+</span><span class="t"> </span><span class="si">~</span><span class="p">(</span><span class="mi">2</span><span class="t"> </span><span class="o">+</span><span class="t"> </span><span class="mi">2</span><span class="p">)</span><span class="p">)</span>
<span class="mi">1</span><span class="t"> </span><span class="o">+</span><span class="t"> </span><span class="mi">4</span>
<span class="caret">&gt; </span><span class="ss">`</span><span class="ss">`</span><span class="p">(</span><span class="mi">1</span><span class="t"> </span><span class="o">+</span><span class="t"> </span><span class="si">~</span><span class="si">~</span><span class="p">(</span><span class="mi">2</span><span class="t"> </span><span class="o">+</span><span class="t"> </span><span class="mi">2</span><span class="p">)</span><span class="p">)</span>
<span class="ss">`</span><span class="p">(</span><span class="mi">1</span><span class="t"> </span><span class="o">+</span><span class="t"> </span><span class="si">~</span><span class="mi">4</span><span class="p">)</span>
<span class="caret">&gt; </span><span class="ss">`</span><span class="p">{</span><span class="t"> </span><span class="n">a</span><span class="t"> </span><span class="o">=</span><span class="t"> </span><span class="si">~</span><span class="p">(</span><span class="mi">2</span><span class="t"> </span><span class="o">+</span><span class="t"> </span><span class="mi">2</span><span class="p">)</span><span class="t"> </span><span class="p">}</span>
<span class="p">{</span><span class="t"> </span><span class="n">a</span><span class="t"> </span><span class="o">=</span><span class="t"> </span><span class="mi">4</span><span class="t"> </span><span class="p">}</span>
<span class="caret">&gt; </span><span class="ss">`</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="t"> </span><span class="mi">2</span><span class="p">,</span><span class="t"> </span><span class="si">~</span><span class="p">(</span><span class="mi">1</span><span class="t"> </span><span class="o">+</span><span class="t"> </span><span class="mi">2</span><span class="p">)</span><span class="p">]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="t"> </span><span class="mi">2</span><span class="p">,</span><span class="t"> </span><span class="mi">3</span><span class="p">]</span>
</pre></div></div></dd></dl></dd><dt>blocks</dt><dd><p>Blocks come in two forms. One is a simple comma-delimited list of
expressions wrapped in curly braces (<code>{ }</code>), and another form
begins with a colon (<code>:</code>) and optionally ends with a semicolon
(<code>;</code>).</p><p>Block parsing is whitespace-aware; see <a href="syntax.html#general-rules">General Rules</a>.</p><div class="example"><p><p><em>Example:</em></p></p><div class="interaction"><pre><span class="caret">&gt; </span><span class="p">{</span><span class="t"> </span><span class="mi">1</span><span class="t"> </span><span class="o">+</span><span class="t"> </span><span class="mi">1</span><span class="t"> </span><span class="p">}</span>
<span class="o">#&lt;</span><span class="no">Proc</span><span class="p">:</span><span class="mh">0x30920</span><span class="vi">@interaction</span><span class="p">:</span><span class="mi">1</span><span class="o">&gt;</span>
<span class="caret">&gt; </span><span class="p">:</span><span class="t"> </span><span class="mi">1</span><span class="t"> </span><span class="o">+</span><span class="t"> </span><span class="mi">1</span><span class="t"> </span><span class="p">;</span>
<span class="o">#&lt;</span><span class="no">Proc</span><span class="p">:</span><span class="mh">0x30bb0</span><span class="vi">@interaction</span><span class="p">:</span><span class="mi">1</span><span class="o">&gt;</span>
<span class="caret">&gt; </span><span class="p">:</span><span class="t"> </span><span class="n">foo</span>
<span class="o">#&lt;</span><span class="no">Proc</span><span class="p">:</span><span class="mh">0x30db4</span><span class="vi">@interaction</span><span class="p">:</span><span class="mi">1</span><span class="o">&gt;</span>
</pre></div></div></dd></dl></div><div class="section" id="section_expressions"><h2 class="section_header"><a name="expressions"></a>Expressions</h2><dl><dt>words</dt><dd><p><code><span class="n">foo</span></code>, <code><span class="n">_foo</span></code>, <code><span class="n">foo-bar</span></code>, ...</p><p>Basic identifiers. They start with a lowercase letter or an underscore,
followed by any number of letters, digits, underscores, or hyphens.</p><div class="example"><p><p><em>Example:</em></p></p><div class="interaction"><pre><span class="caret">&gt; </span><span class="kc">true</span>
<span class="kc">true</span>
<span class="caret">&gt; </span><span class="kc">nil</span>
<span class="kc">nil</span>
<span class="caret">&gt; </span><span class="n">_FILE</span>
<span class="s">&quot;</span><span class="s">interaction</span><span class="s">&quot;</span>
</pre></div></div></dd><dt>calls</dt><dd><p><code><span class="n">foo</span><span class="p">(</span><span class="p">)</span></code>, <code><span class="n">foo</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span></code>, <code><span class="n">foo</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="t"> </span><span class="mi">2</span><span class="p">)</span></code>, <code><span class="s">&quot;</span><span class="s">foo</span><span class="s">&quot;</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="t"> </span><span class="mi">2</span><span class="p">)</span></code>, <code><span class="mi">2</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="t"> </span><span class="mi">4</span><span class="p">)</span></code> ...</p><p>A node, <code>name</code>, paired with a list of other nodes, the
<code><span class="n">arguments</span></code>.</p><div class="example"><p><p><em>Example:</em></p></p><div class="interaction"><pre><span class="caret">&gt; </span><span class="n"><a href="input-and-output.html#puts">puts</a></span><span class="p">(</span><span class="s">&quot;</span><span class="s">foo</span><span class="s">&quot;</span><span class="p">)</span>
foo
<span class="s">&quot;</span><span class="s">foo</span><span class="s">&quot;</span>
</pre></div></div></dd><dt>composes</dt><dd><p><code><span class="n">x</span><span class="t"> </span><span class="n">y</span></code>, <code><span class="n">foo</span><span class="t"> </span><span class="n">bar</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="t"> </span><span class="mi">3</span><span class="p">)</span></code>, ...</p><p>Two nodes composed side-by-side.</p><div class="example"><p><p><em>Example:</em></p></p><div class="interaction"><pre><span class="caret">&gt; </span><span class="mi">1</span><span class="t"> </span><span class="n">class</span>
<span class="no">Fixnum</span>
</pre></div></div></dd><dt>prefix</dt><dd><p><code><span class="o">!</span><span class="n">foo</span></code>, <code><span class="vg">$foo</span></code>, <code><span class="vi">@foo</span></code>, ...</p><p>A node prefixed by a single symbol.</p><div class="example"><p><p><em>Example:</em></p></p><div class="interaction"><pre><span class="caret">&gt; </span><span class="vi">@foo</span>
<span class="kc">nil</span>
<span class="caret">&gt; </span><span class="vg">$stdin</span>
<span class="o">#&lt;</span><span class="no">IO</span><span class="p">:</span><span class="n">fd</span><span class="t"> </span><span class="mi">0</span><span class="o">&gt;</span>
</pre></div></div></dd><dt>postfix</dt><dd><p><code><span class="n">foo</span><span class="o">!</span></code>, <code><span class="n">foo</span><span class="o">?</span></code>, <code><span class="n">foo</span><span class="o">@</span></code>, ...</p><p>A node punctuated by a single symbol at the end.</p><div class="example"><p><p><em>Example:</em></p></p><div class="interaction"><pre><span class="caret">&gt; </span><span class="n">nil</span><span class="o">?</span>
<span class="kc">false</span>
</pre></div></div></dd><dt>binary</dt><dd><p><code><span class="n">foo</span><span class="t"> </span><span class="o">+</span><span class="t"> </span><span class="n">bar</span></code>, <code><span class="n">fizz</span><span class="t"> </span><span class="o">*</span><span class="t"> </span><span class="n">buzz</span></code>, ...</p><p>Two nodes separated by an operator.</p><p>An operator can either by a string of one or more symbols, or a word
defined to be an operator via <code><span class="n">infix</span></code>.</p><p>Precedence and associativity can be set via <code><span class="n">infix</span></code>.</p><div class="example"><p><p><em>Example:</em></p></p><div class="interaction"><pre><span class="caret">&gt; </span><span class="mi">1</span><span class="t"> </span><span class="o">+</span><span class="t"> </span><span class="mi">1</span>
<span class="mi">2</span>
<span class="caret">&gt; </span><span class="mi">1</span><span class="t"> </span><span class="n">is-in</span><span class="t"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="t"> </span><span class="mi">1</span><span class="p">,</span><span class="t"> </span><span class="mi">1</span><span class="p">,</span><span class="t"> </span><span class="mi">2</span><span class="p">,</span><span class="t"> </span><span class="mi">3</span><span class="p">]</span>
<span class="kc">true</span>
</pre></div></div></dd></dl></div><div class="section" id="section_language"><h2 class="section_header"><a name="language"></a><code><span class="kr">#language</span></code></h2><p>You can tell the parser to switch to a different parser via <code><span class="kr">#language</span><span class="t">
  </span><span class="n">foo</span></code>. This will change the grammar to use the <code><span class="no">Parser</span></code> defined in
<code><span class="n">require</span><span class="p">(</span><span class="s">&quot;</span><span class="s">foo/language/parser</span><span class="s">&quot;</span><span class="p">)</span></code>.</p><p>Anatomy use this for its document files, via <code><span class="kr">#language</span><span class="t"> </span><span class="n">anatomy</span></code>. You can
change the parser at any time, even in the middle of a file. The result of
the new parser is what the <code><span class="kr">#language</span></code> node results in.</p></div></div></div></div><div class="search"><form action="javascript:void(0)"><input type="text" placeholder="Search&hellip;" autocomplete="off" id="search" /></form><ul class="search_results"></ul></div><div id="sidebar"><h4>On this page:</h4><ol class="toc"><li><a href="syntax.html#general-rules">General Rules</a></li><li><a href="syntax.html#comments">Comments</a></li><li><a href="syntax.html#literals-syntax">Literals</a></li><li><a href="syntax.html#expressions">Expressions</a></li><li><a href="syntax.html#language"><code><span class="kr">#language</span></code></a></li></ol><h4>Up one level:</h4><ol class="toc"><li><a href="index.html">Atomy</a><ol><li><a href="why.html">What &amp; Why</a><ol><li><a href="why.html#philosophy">Philosophy</a></li><li><a href="why.html#idioms-and-freebies">Idioms &amp; Freebies</a><ol><li><a href="why.html#platform">Platform</a></li><li><a href="why.html#its-algebraic">It's Algebraic!</a></li><li><a href="why.html#a-handful-of-shiny-toys">A Handful of Shiny Toys</a></li></ol></li><li><a href="why.html#influences-and-thanks">Influences &amp; Thanks</a></li></ol></li><li><a href="syntax.html">Syntax</a><ol><li><a href="syntax.html#general-rules">General Rules</a></li><li><a href="syntax.html#comments">Comments</a></li><li><a href="syntax.html#literals-syntax">Literals</a></li><li><a href="syntax.html#expressions">Expressions</a></li><li><a href="syntax.html#language"><code><span class="kr">#language</span></code></a></li></ol></li><li><a href="pattern-matching.html">Pattern Matching</a><ol><li><a href="pattern-matching.html#types-of-patterns">Types of Patterns</a></li><li><a href="pattern-matching.html#a-patterns-target">A Pattern's Target</a></li></ol></li><li><a href="reference.html">Reference</a><ol><li><a href="concurrency.html">Concurrency</a><ol><li><a href="concurrency.html#sending-and-receiving">Sending &amp; Receiving</a></li><li><a href="concurrency.html#spawning">Spawning</a></li></ol></li><li><a href="condition-system.html">Condition System</a><ol><li><a href="condition-system.html#conditions">Conditions</a></li><li><a href="condition-system.html#handling">Handling</a></li><li><a href="condition-system.html#signalling">Signalling</a></li><li><a href="condition-system.html#debuggers">Debuggers</a></li></ol></li><li><a href="core.html">Core</a></li><li><a href="input-and-output.html">Input &amp; Output</a><ol><li><a href="input-and-output.html#output">Output</a></li><li><a href="input-and-output.html#input">Input</a></li></ol></li><li><a href="the-repl.html">The REPL</a></li><li><a href="therie.html">Testing with Therie</a><ol><li><a href="therie.html#structure">Structure</a></li><li><a href="therie.html#tests">Tests</a></li></ol></li></ol></li></ol></li></ol></div></body></html>