<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Concurrency</title><link type="text/css" rel="stylesheet" href="public/anatomy.css" /><link type="text/css" rel="stylesheet" href="public/highlight.css" /><script type="text/javascript" src="public/jquery.js"></script><script type="text/javascript" src="public/jquery.hotkeys.js"></script><script type="text/javascript" src="public/tags_concurrency.js"></script><script type="text/javascript" src="public/main.js"></script></head><body><div id="main"><div id="content"><div class="section" id="section_concurrency"><h1 class="section_header"><a name="concurrency"></a>Concurrency</h1><p></p><div class="interaction"><pre><span class="caret">&gt; </span><span class="n">use</span><span class="p">(</span><span class="s">&quot;</span><span class="s">concurrency</span><span class="s">&quot;</span><span class="p">)</span>
<span class="o">#&lt;</span><span class="no"><a href="index.html">Atomy</a></span><span class="p">:</span><span class="p">:</span><span class="no">Module</span><span class="t"> </span><span class="ss">'concurrency</span><span class="ss">.ay</span><span class="ss">'</span><span class="o">&gt;</span>
</pre></div><div class="definition"><p><a name="me"></a></p><div class="thumb"><pre><span class="n"><a href="concurrency.html#me">me</a></span><span class="definition_result_arrow"> =&gt; </span><span class="no">Actor</span></pre></div><p>Get the current actor.</p></div><div class="section" id="section_sending-and-receiving"><h2 class="section_header"><a name="sending-and-receiving"></a>Sending &amp; Receiving</h2><div class="definition"><p><a name="<-"></a></p><div class="thumb"><pre><span class="no">Actor</span><span class="t"> </span><span class="o"><a href="concurrency.html#<-">&lt;-</a></span><span class="t"> </span><span class="n">v</span><span class="definition_result_arrow"> =&gt; </span><span class="no">Actor</span></pre></div><p>Send message <code>v</code> to the actor.</p><div class="example"><p><p><em>Example:</em></p></p><div class="interaction"><pre><span class="caret">&gt; </span><span class="n">a</span><span class="t"> </span><span class="o">=</span><span class="t"> </span><span class="n"><a href="concurrency.html#spawn">spawn</a></span><span class="p">:</span><span class="t"> </span><span class="n"><a href="concurrency.html#receive">receive</a></span><span class="t"> </span><span class="p">{</span><span class="t"> </span><span class="mi">42</span><span class="t"> </span><span class="o">-&gt;</span><span class="t"> </span><span class="ss">.ok</span><span class="t"> </span><span class="p">}</span><span class="t"> </span><span class="n">write</span>
<span class="o">#&lt;</span><span class="no">Actor</span><span class="p">:</span><span class="mh">0x432cc</span><span class="o">&gt;</span>
<span class="caret">&gt; </span><span class="n">a</span><span class="t"> </span><span class="o"><a href="concurrency.html#<-">&lt;-</a></span><span class="t"> </span><span class="mi">42</span>
<span class="o">#&lt;</span><span class="no">Actor</span><span class="p">:</span><span class="mh">0x432cc</span><span class="o">&gt;</span>
</pre></div></div></div><div class="definition macro"><p><a name="receive"></a></p><div class="thumb"><pre><span class="n"><a href="concurrency.html#receive">receive</a></span><span class="p">:</span><span class="t"> </span><span class="si">~</span><span class="o">*</span><span class="n">branches</span></pre></div><p>Receive a message sent to the current actor that matches any of the
patterns listed in <code><span class="n">branches</span></code>. Blocks until a matching message is
received. Non-matching messages are consumed and ignored.</p><div class="example"><p><p><em>Example:</em></p></p><div class="interaction"><pre><span class="caret">&gt; </span><span class="n">a</span><span class="t"> </span><span class="o">=</span><span class="t"> </span><span class="n"><a href="concurrency.html#spawn">spawn</a></span><span class="p">:</span><span class="t"> </span><span class="n"><a href="concurrency.html#receive">receive</a></span><span class="t"> </span><span class="p">{</span><span class="t"> </span><span class="mi">1</span><span class="t"> </span><span class="o">-&gt;</span><span class="t"> </span><span class="ss">.got-1</span><span class="t"> </span><span class="p">}</span><span class="t"> </span><span class="n">write</span>
<span class="o">#&lt;</span><span class="no">Actor</span><span class="p">:</span><span class="mh">0x43c30</span><span class="o">&gt;</span>
<span class="caret">&gt; </span><span class="n">a</span><span class="t"> </span><span class="o"><a href="concurrency.html#<-">&lt;-</a></span><span class="t"> </span><span class="mi">0</span>
<span class="o">#&lt;</span><span class="no">Actor</span><span class="p">:</span><span class="mh">0x43c30</span><span class="o">&gt;</span>
<span class="caret">&gt; </span><span class="n">a</span><span class="t"> </span><span class="o"><a href="concurrency.html#<-">&lt;-</a></span><span class="t"> </span><span class="mi">2</span>
<span class="o">#&lt;</span><span class="no">Actor</span><span class="p">:</span><span class="mh">0x43c30</span><span class="o">&gt;</span>
<span class="caret">&gt; </span><span class="n">a</span><span class="t"> </span><span class="o"><a href="concurrency.html#<-">&lt;-</a></span><span class="t"> </span><span class="mi">1</span>
<span class="o">#&lt;</span><span class="no">Actor</span><span class="p">:</span><span class="mh">0x43c30</span><span class="o">&gt;</span>
</pre></div></div></div><div class="definition macro"><p><a name="receive-after"></a></p><div class="thumb"><pre><span class="n">receive</span><span class="t"> </span><span class="p">{</span><span class="t"> </span><span class="si">~</span><span class="o">*</span><span class="n">branches</span><span class="t"> </span><span class="p">}</span><span class="t"> </span><span class="n">after</span><span class="p">(</span><span class="si">~timeout</span><span class="p">)</span><span class="p">:</span><span class="t"> </span><span class="si">~</span><span class="o">*</span><span class="n">body</span></pre></div><p>Similar to <code>receive</code>, but with a timeout and an action to
perform if it times out.</p><div class="example"><p><p><em>Example:</em></p></p><div class="interaction"><pre><span class="caret">&gt; </span><span class="n"><a href="concurrency.html#receive">receive</a></span><span class="t"> </span><span class="p">{</span><span class="t"> </span><span class="mi">1</span><span class="t"> </span><span class="o">-&gt;</span><span class="t"> </span><span class="ss">.ok</span><span class="t"> </span><span class="p">}</span><span class="t"> </span><span class="n">after</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="p">:</span><span class="t"> </span><span class="ss">.too-slow</span>
<span class="ss">.too-slow</span>
</pre></div></div></div></div><div class="section" id="section_spawning"><h2 class="section_header"><a name="spawning"></a>Spawning</h2><div class="definition"><p><a name="spawn"></a></p><div class="thumb"><pre><span class="n"><a href="concurrency.html#spawn">spawn</a></span><span class="t"> </span><span class="o">&amp;</span><span class="n">action</span><span class="definition_result_arrow"> =&gt; </span><span class="no">Actor</span></pre></div><p>Spawn a new actor, performing <code>action</code>.</p><div class="example"><p><p><em>Example:</em></p></p><div class="interaction"><pre><span class="caret">&gt; </span><span class="n"><a href="concurrency.html#spawn">spawn</a></span><span class="p">:</span><span class="t"> </span><span class="p">(</span><span class="mi">2</span><span class="t"> </span><span class="o">+</span><span class="t"> </span><span class="mi">2</span><span class="p">)</span><span class="t"> </span><span class="n">write</span>
<span class="o">#&lt;</span><span class="no">Actor</span><span class="p">:</span><span class="mh">0x44ba4</span><span class="o">&gt;</span>
</pre></div></div></div><div class="definition"><p><a name="spawn-link"></a></p><div class="thumb"><pre><span class="n"><a href="concurrency.html#spawn-link">spawn-link</a></span><span class="t"> </span><span class="o">&amp;</span><span class="n">action</span><span class="definition_result_arrow"> =&gt; </span><span class="no">Actor</span></pre></div><p>Spawn a new actor, performing <code>action</code>, linked to the current
actor.</p><div class="example"><p><p><em>Example:</em></p></p><div class="interaction"><pre><span class="caret">&gt; </span><span class="n"><a href="concurrency.html#spawn-link">spawn-link</a></span><span class="p">:</span><span class="t"> </span><span class="p">(</span><span class="mi">2</span><span class="t"> </span><span class="o">+</span><span class="t"> </span><span class="mi">2</span><span class="p">)</span><span class="t"> </span><span class="n">write</span>
<span class="o">#&lt;</span><span class="no">Actor</span><span class="p">:</span><span class="mh">0x450e0</span><span class="o">&gt;</span>
</pre></div></div></div></div></div></div></div><div class="search"><form action="javascript:void(0)"><input type="text" placeholder="Search&hellip;" autocomplete="off" id="search" /></form><ul class="search_results"></ul></div><div id="sidebar"><h4>On this page:</h4><ol class="toc"><li><a href="concurrency.html#sending-and-receiving">Sending &amp; Receiving</a></li><li><a href="concurrency.html#spawning">Spawning</a></li></ol><h4>Up one level:</h4><ol class="toc"><li><a href="reference.html">Reference</a><ol><li><a href="concurrency.html">Concurrency</a><ol><li><a href="concurrency.html#sending-and-receiving">Sending &amp; Receiving</a></li><li><a href="concurrency.html#spawning">Spawning</a></li></ol></li><li><a href="condition-system.html">Condition System</a><ol><li><a href="condition-system.html#conditions">Conditions</a></li><li><a href="condition-system.html#handling">Handling</a></li><li><a href="condition-system.html#signalling">Signalling</a></li><li><a href="condition-system.html#debuggers">Debuggers</a></li></ol></li><li><a href="core.html">Core</a></li><li><a href="input-and-output.html">Input &amp; Output</a><ol><li><a href="input-and-output.html#output">Output</a></li><li><a href="input-and-output.html#input">Input</a></li></ol></li><li><a href="the-repl.html">The REPL</a></li><li><a href="therie.html">Testing with Therie</a><ol><li><a href="therie.html#structure">Structure</a></li><li><a href="therie.html#tests">Tests</a></li></ol></li></ol></li></ol></div></body></html>